## 测量数据存储方案

### 需求

* 减少体积
* 兼容老数据的读写
* 方便调试和测试
* 数据格式可自描述
  * 可区别
  * 读写跨平台语音的编码
* 格式标准化
* 方便备份/搜索

### 测量存储数据

* **spec** 版本,当前是2

* **id** 记录ID

* **数据负载**  原始数据

   * 把data0,data1中48000个byte加入`payloads`

* **数据格式**  使用protobuf 

   ```protobuf
   message PulseTestRawData{
       uint32 spec = 1;
       uint32 record_id = 10;
       bytes payloads = 100;
   }
   ```
* **数据传输**  使用protobuf3

### 添加数据库字段 `s3_key`

   * 格式
     * 新数据格式 /%{year}/%{month}/%{day}/%{record_id}.pbd
     * 老数据格式 /%{record_id}.txt

   * 需要编写数据库脚本把老数据文件的路径迁移过来

### 迁移工具

   * 需求:方便调试和测试
        *  把生产数据导入到其他测试环境
           *  aws上正式环境的数据导入其他环境

### 查看/转化工具

   * 需求:方便调试和测试
   * 目标:把新的,不可读的数据转化成老的,可视化的数据

### 文件的名称

* 老的数据文件名称：.txt
* 新的数据文件名称：.pbd

### 文件的路径
* 老的数据文件路径：spec-v1/${filename}
* 新的数据文件路径：spec-v2/${filename}

​     
