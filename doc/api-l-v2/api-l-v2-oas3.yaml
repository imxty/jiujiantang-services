openapi: 3.0.0
info:
  description: 金姆健康一体机API v1.0
  version: "1.11.4-beta-oas3"
  title: JinmuL-API
  termsOfService: 'http://www.jinmuhealth.com/legalProvisions/developer-agreement.html'
  contact:
    email: support@jinmuhealth.com
tags:
  - name: client
    description: App 客户端
  - name: auth
    description: 用户授权
  - name: device
    description: Device 管理
  - name: qrcode
    description: 二维码
  - name: user
    description: 用户
  - name: measurement
    description: 测量
  - name: h5
    description: h5页面
paths:
  /client/auth:
    post:
      tags:
        - client
      summary: 提交客户端授权
      operationId: submitClientAuth
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClientAuthResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Auth'
        required: true
  /account/signin:
    post:
      tags:
        - auth
      summary: 账户登录
      operationId: accountSignIn
      parameters:
        - name: Authorization
          in: header
          description: Client验证授权信息
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountSignInResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccountSignIn'
        required: true
  '/account/{account}/signout':
    post:
      tags:
        - auth
      summary: 账户登出
      operationId: accountSignOut
      parameters:
        - name: Authorization
          in: header
          description: Client验证授权信息
          required: true
          schema:
            type: string
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
        - name: account
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountSignOutResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
  '/organizations/{organization_id}/devices':
    post:
      tags:
        - device
      summary: 批量关联 Device
      operationId: accountBindOrganizationDevices
      parameters:
        - name: Authorization
          in: header
          required: true
          description: Client验证授权信息
          schema:
            type: string
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
        - name: organization_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BindDevicesResponse'
              examples:
                response:
                  value:
                    ok: true
                    data:
                      successful_devices:
                        - mac: string
                      failed_devices:
                        - mac: string
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
      requestBody:
        $ref: '#/components/requestBodies/DeviceList'
    get:
      tags:
        - device
      summary: 获取组织关联的 Device 列表
      operationId: accountGetOrganizationDeviceList
      parameters:
        - name: Authorization
          in: header
          required: true
          description: Client验证授权信息
          schema:
            type: string
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
        - name: organization_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetDeviceResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
  '/organizations/{organization_id}/devices/delete':
    post:
      tags:
        - device
      summary: 批量解除组织关联的 Device
      operationId: accountUnbindOrganizationDevices
      parameters:
        - name: Authorization
          in: header
          required: true
          description: Client验证授权信息
          schema:
            type: string
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
        - name: organization_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnbindDeviceResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
      requestBody:
        $ref: '#/components/requestBodies/DeviceList'
  '/organizations/{organization_id}/devices/is_bindable':
    post:
      tags:
        - device
      summary: 判断 Device 是否可以被该组织关联
      operationId: accountCheckOrganizationDeviceBindable
      parameters:
        - name: Authorization
          in: header
          required: true
          description: Client验证授权信息
          schema:
            type: string
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
        - name: organization_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IsBindDevicesResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Device'
        required: true
  /wxmp/qrcode:
    get:
      summary: 获取临时二维码
      operationId: getWxmpTempQrCodeURL
      tags:
        - qrcode
      parameters:
        - name: Authorization
          in: header
          required: true
          description: Client验证授权信息
          schema:
            type: string
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QRCodeResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
  /jinmu_res/getUrl:
    post:
      tags:
        - res
      summary: 获取金姆资源的baseURL
      operationId: getJMResBaseURL
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JMResResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JMRes'
        required: true
  '/users/{user_id}/profile':
    put:
      tags:
        - user
      summary: 修改组织下用户的个人档案
      operationId: accountModifyOrganizationUserProfile
      parameters:
        - name: Authorization
          in: header
          required: true
          description: Client验证授权信息
          schema:
            type: string
        - name: user_id
          in: path
          description: 用户 ID
          required: true
          schema:
            type: integer
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileResponse'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PutUserProfile'
        description: 客户档案
    get:
      tags:
        - user
      summary: Owner 获取组织下用户的个人档案
      operationId: ownerGetOrganizationUserProfile
      parameters:
        - name: Authorization
          in: header
          description: Client验证授权信息
          required: true
          schema:
            type: string
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
        - name: user_id
          in: path
          description: 用户 id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
  /measurements:
    post:
      tags:
        - measurement
      summary: 提交测量
      operationId: submitMeasurement
      parameters:
        - name: Authorization
          in: header
          required: true
          description: Client验证授权信息
          schema:
            type: string
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MeasureResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Measurement'
    get:
      tags:
        - measurement
      summary: 查看测量历史记录
      description: 测量历史记录.最新的结果会靠前
      operationId: ownerQueryMeasurementList
      parameters:
        - name: Authorization
          in: header
          required: true
          description: Client验证授权信息
          schema:
            type: string
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
        - name: open_id
          in: query
          description: 微信的OpenID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MeasurementDataWithAnalysisResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
  '/measurements/{record_id}/token':
    get:
      tags:
        - measurement
      summary: 得到分享的token
      description: 得到分享的token
      operationId: ownerGetRecordToken
      parameters:
        - name: Authorization
          in: header
          required: true
          description: Client验证授权信息
          schema:
            type: string
        - name: X-Access-Token
          in: header
          description: 用户登录token
          required: true
          schema:
            type: string
        - name: record_id
          in: path
          description: 测量记录ID
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecordTokenResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
  '/measurements/{record_id}/analyze':
    post:
      tags:
        - measurement
      summary: 提交智能分析
      operationId: submitMeasurementAnalysis
      parameters:
        - name: Authorization
          in: header
          required: true
          description: Client验证授权信息
          schema:
            type: string
        - name: record_id
          in: path
          required: true
          description: 测量流水号
          schema:
            type: integer
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnalysisResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Analysis'
    get:
      tags:
        - measurement
      summary: 获取智能分析
      operationId: getMeasurementAnalysis
      parameters:
        - name: Authorization
          in: header
          required: true
          description: Client验证授权信息
          schema:
            type: string
        - name: record_id
          in: path
          required: true
          description: 测量流水号
          schema:
            type: integer
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetAnalysisResponse'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
  /h5:
    get:
      tags:
        - h5
      summary: 获取智能分析
      operationId: getH5Response
      parameters:
        - name: Authorization
          in: header
          required: true
          description: Client验证授权信息
          schema:
            type: string
        - name: X-Access-Token
          in: header
          description: 用户登录 token
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 成功响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetH5Response'
        default:
          description: 失败响应
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleErrorResponse'
servers:
  - url: 'http://api.jinmul.jinmuhealth.com:59434/l-v2-api'
    description: Production
components:
  requestBodies:
    DeviceList:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/DeviceList'
      required: true
  schemas:
    Gender:
      type: integer
      enum:
        - 0
        - 1
      default: 0
      description: |
        性别:
        - `0` - 男(默认值)
        - `1` - 女  
    Finger:
      type: integer
      enum:
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
        - 7
        - 8
        - 9
        - 10
      default: 4
      description: |
        手指:
        - `1` - 左小姆
        - `2` - 左无名指
        - `3` - 左中指
        - `4` - 左食指(默认值)
        - `5` - 左大拇
        - `6` - 右大拇
        - `7` - 右食指
        - `8` - 右中指
        - `9` - 右无名指
        - `10` - 右小拇
    MeasurementPosture:
      type: integer
      enum:
        - 0
        - 1
        - 2
      default: 0
      description: |
        姿态:
        - `0` - 坐姿    
        - `1` - 站姿
        - `2` - 躺姿
    AnalysisReportContentTags:
      type: array
      description: 分析报告的选项标签
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    RecordType:
      type: integer
      enum:
        - 5
        - 7
      default: 7
      description: |
        测量结果记录类型:
          - `5` - 1.5版本
          - `7` - 1.7以上版本(包括1.7), 默认值
    ChannelsAndCollateralsStrength:
      type: array
      description: 经络强度
      items:
        $ref: '#/components/schemas/AnalysisReportCCStrengthItem'
    AnalysisReportCCStrengthItem:
      type: object
      description: 经络强度 Item
      properties:
        key:
          type: string
          description: 解读项的标识 Key
        label:
          type: array
          description: 经络强度标签
          items:
            $ref: '#/components/schemas/CCStrengthLabel'
        disabled:
          type: boolean
          description: 是否已经弃用。
        remark:
          type: string
          description: 备注
    CCStrengthLabel:
      type: object
      description: 经络强度分析的项目的标签
      properties:
        label:
          type: string
          description: 文本标签，可以是HTML
        CC:
          type: string
          description: 经络标识
    BabyTips:
      type: array
      description: 宝宝提示
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    ConstitutionDifferentiationExplainNotices:
      type: array
      description: 体质判断注意事项
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    ChannelsAndCollateralsExplainNotices:
      type: array
      description: 经络检测注意事项
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    MeasurementTips:
      type: array
      description: 测量提示
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    DictionaryEntries:
      type: array
      description: 词条描述
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    FactorExplains:
      type: array
      description: 因子解读
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    AnalysisReportContentLead:
      type: array
      description: 分析导语内容
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    AnalysisReportContentTipsForWoman:
      type: array
      description: 分析报告的女性提示
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    AnalysisReportCCExplains:
      type: array
      description: 分析报告的经络解读
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    AnalysisReportCDExplains:
      type: array
      description: 分析报告的体质判断
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    AnalysisReportSDExplains:
      type: array
      description: 分析报告的脏腑判断
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    HealthDescriptions:
      type: array
      description: 健康描述
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    UterineHealthIndexes:
      type: array
      description: 分析报告的子宫健康指数（ZG）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    UterusAttentionPrompts:
      type: array
      description: 分析报告的子宫注意提示（ZGTS）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    UterineHealthDescriptions:
      type: array
      description: 分析报告的子宫健康描述（ZGMS）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    MenstrualHealthValues:
      type: array
      description: 分析报告的月经健康数值（YJ）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    MenstrualHealthDescriptions:
      type: array
      description: 分析报告的月经健康描述（YJMS）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    GynecologicalInflammations:
      type: array
      description: 分析报告的妇科炎症（FK）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    GynecologicalInflammationDescriptions:
      type: array
      description: 分析报告的妇科炎症描述（FKMS）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    BreastHealth:
      type: array
      description: 分析报告的乳腺健康（RX）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    BreastHealthDescriptions:
      type: array
      description: 分析报告的乳腺健康描述（RXMS）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    EmotionalHealthIndexes:
      type: array
      description: 分析报告的情绪健康指数（QX）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    EmotionalHealthDescriptions:
      type: array
      description: 分析报告的情绪健康描述（QXMS）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    FacialSkins:
      type: array
      description: 分析报告的面部美肤（MB）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    FacialSkinDescriptions:
      type: array
      description: 分析报告的面部美肤描述（MBMS）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    ReproductiveAgeConsiderations:
      type: array
      description: 分析报告的生殖年龄注意事项（SZTS）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    HormoneLevels:
      type: array
      description: 分析报告的激素水平（JS）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    BreastCancerOvarianCancers:
      type: array
      description: 分析报告的乳腺癌卵巢癌（BC）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    BreastCancerOvarianCancerDescriptions:
      type: array
      description: 分析报告的乳腺癌卵巢癌描述（BCMS）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    LymphaticHealth:
      type: array
      description: 分析报告的淋巴健康（LB）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    LymphaticHealthDescriptions:
      type: array
      description: 分析报告的淋巴健康描述（LBMS）
      items:
        $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
    AnalysisReportGeneralExplainItem:
      type: object
      description: 标准解读 Item
      properties:
        key:
          type: string
          description: 解读项的标识 Key
        label:
          type: string
          description: 解读项的文本标签。支持HTML。
        content:
          type: string
          description: 解读项的正文内容。支持HTML。
    BasicResponse:
      type: object
      description: 标准Response消息体
      required:
        - ok
      properties:
        ok:
          type: boolean
          description: 请求是否成功
        error:
          $ref: '#/components/schemas/StandardErrorModel'
    SimpleErrorResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - error
          properties:
            error:
              $ref: '#/components/schemas/StandardErrorModel'
    UserProfileResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/User'
    User:
      type: object
      properties:
        user_id:
          type: integer
          description: 用户ID
        username:
          type: string
          description: 用户名
        register_type:
          type: string
          description: |
            注册类型，支持以下字符串值：
            - `legacy` - 传统（兼容金姆1.x账号）. 默认值.
            - `username` - 用户名
            - `email` - 邮箱
            - `phone` - 手机
            - `wechat` - 微信
        is_profile_completed:
          type: boolean
          description: profile是否完整/完成初始化 0是完整 1是不完整
        is_removable:
          type: boolean
          description: 是否能够删除
        profile:
          $ref: '#/components/schemas/UserProfile'
    PutUserProfile:
      type: object
      properties:
        profile:
          $ref: '#/components/schemas/UserProfile'
    UserProfile:
      type: object
      properties:
        nickname:
          type: string
          description: 客户昵称
        birthday:
          type: string
          description: 生日 '2018-04-12' 格式 （可选）
          format: date-time
        age:
          type: integer
          description: 年龄
          minimum: 0
        gender:
          $ref: '#/components/schemas/Gender'
        height:
          type: integer
          description: 身高（必填）单位厘米
          minimum: 0
        weight:
          type: integer
          description: 体重（必填）单位厘米
          minimum: 0
        phone:
          type: string
          description: 联系电话（可选）
        email:
          type: string
          description: 联系邮箱（可选）
        remark:
          type: string
          description: 备注 不超过200字符
          maxLength: 200
        user_defined_code:
          type: string
          description: 用户自定义代码
        state:
          type: string
          description: 所在省份
        city:
          type: string
          description: 所在城市
        street:
          type: string
          description: 所在街道
        country:
          type: string
          description: 国家
    BindDevicesResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/DevicesResult'
    UnbindDeviceResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/DevicesResult'
    QRCodeResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/QRCode'
    QRCode:
      type: object
      properties:
        image_url:
          type: string
          description: 下载图片的url
        raw_url:
          type: string
          description: 显示图片的url
        expired_at:
          type: string
          description: 到期时间
          format: date-time
        scene_id:
          type: integer
          description: 场景ID
    DevicesResult:
      type: object
      properties:
        successful_devices:
          type: array
          items:
            $ref: '#/components/schemas/Device'
        failed_devices:
          type: array
          items:
            $ref: '#/components/schemas/Device'
    StandardErrorModel:
      type: object
      description: 标准错误消息
      required:
        - msg
        - code
      properties:
        msg:
          type: string
          description: 错误信息
          x-nullable: true
        code:
          type: integer
          description: 错误码
          x-nullable: true
    NullAble:
      type: object
    Auth:
      type: object
      properties:
        client_id:
          type: string
          description: 客户端ID
        secret_key_hash:
          type: string
          description: 经过 SHA256 签名的 App 授权密钥
        seed:
          type: string
          description: '随机种子。四个可读ASCII字符，例如：`a#B9`'
    ClientAuthResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/Authorization'
    GetDeviceResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/Device'
    Authorization:
      type: object
      properties:
        authorization:
          type: string
          description: Client验证授权信息
        expired_at:
          type: string
          description: 到期时间
          format: date-time
    AccountSignIn:
      type: object
      properties:
        account:
          type: string
          description: 账户
        password:
          type: string
          description: 密码
        machine_uuid:
          type: string
          description: 机器唯一标识
    AccountSignInResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/Account'
    AccountSignOutResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/NullAble'
    Account:
      type: object
      properties:
        access_token:
          type: string
          description: 机构登录会话信息
        organization_id:
          type: integer
          description: 组织ID
        expired_at:
          type: string
          description: 到期时间
          format: date-time
    DeviceList:
      type: array
      items:
        $ref: '#/components/schemas/Device'
    Device:
      type: object
      properties:
        mac:
          $ref: '#/components/schemas/Mac'
    Mac:
      type: string
      description: MAC 地址
    JMResResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/BaseURL'
    BaseURL:
      type: object
      properties:
        entry_url:
          type: string
          description: 词条的BaseURL
        faq_url:
          type: string
          description: faq的BaseURL
        questionnaire_url:
          type: string
          description: 问答的BaseURL
    JMRes:
      type: object
      properties:
        client_id:
          type: string
          description: 客户端ID
        app_version:
          type: string
          description: app版本
    IsBindDevicesResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/BindInfo'
    BindInfo:
      type: object
      properties:
        bindable:
          type: boolean
          description: Y是能被关联 N是不能被关联
    MeasureResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/MeasureResult'
    MeasureResult:
      type: object
      properties:
        cid:
          type: integer
          description: 测量流水号
        record_id:
          type: integer
          description: 测量记录ID
        c0:
          type: integer
          description: '心包经 位于区间[-10,10]内'
        c1:
          type: integer
          description: '肝经 位于区间[-10,10]内'
        c2:
          type: integer
          description: '肾经 位于区间[-10,10]内'
        c3:
          type: integer
          description: '脾经 位于区间[-10,10]内'
        c4:
          type: integer
          description: '肺经 位于区间[-10,10]内'
        c5:
          type: integer
          description: '胃经 位于区间[-10,10]内'
        c6:
          type: integer
          description: '胆经 位于区间[-10,10]内'
        c7:
          type: integer
          description: '膀胱经 位于区间[-10,10]内'
        wave_data:
          type: array
          items:
            type: integer
          description: 截取的波形数据
        app_heart_rate:
          type: integer
          description: App 测量的心率
        app_highest_heart_rate:
          type: integer
          description: App 测的最高心率
        app_lowest_heart_rate:
          type: integer
          description: App 测的最低心率
        heart_rate:
          type: integer
          description: 服务器返回的心率
        created_at:
          type: string
          description: '测量时间 utc 时区 2018-07-04T08:01:27Z 格式'
          format: date-time
        finger:
          $ref: '#/components/schemas/Finger' 
        record_type:
          $ref: '#/components/schemas/RecordType'
    Measurement:
      type: object
      properties:
        measurement:
          $ref: '#/components/schemas/MeasurementData'
    MeasurementData:
      type: object
      properties:
        user_id:
          type: integer
          description: 用户ID
        data0:
          type: string
          description: base64编码后的二进制蓝牙数据
        data1:
          type: string
          description: base64编码后的二进制蓝牙数据
        mac:
          type: string
          description: 设备 MAC 地址
        mobile_type:
          type: string
          description: |
            设备类型，支持以下字符串值：
            - `ANDROID`
            - `IPHONE`
        app_heart_rate:
          type: integer
          description: App 测的心率
        app_highest_heart_rate:
          type: integer
          description: App 测的最高心率
        app_lowest_heart_rate:
          type: integer
          description: App 测的最低心率
        finger:
          $ref: '#/components/schemas/Finger'
        record_type:
          $ref: '#/components/schemas/RecordType'
        measurement_posture:
          $ref: '#/components/schemas/MeasurementPosture'     
    MeasurementDataWithAnalysisResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/MeasurementHistoryRecord'
    MeasurementHistoryRecord:
      type: object
      properties:
        user_id:
          type: integer
          description: 用户ID
        cid:
          type: integer
          description: 上下文ID
        transaction_no:
          type: string
          description: 测量流水号
        record_id:
          type: integer
          description: 测量记录ID
        c0:
          type: integer
          description: '心包经 位于区间[-10,10]内'
        c1:
          type: integer
          description: '肝经 位于区间[-10,10]内'
        c2:
          type: integer
          description: '肾经 位于区间[-10,10]内'
        c3:
          type: integer
          description: '脾经 位于区间[-10,10]内'
        c4:
          type: integer
          description: '肺经 位于区间[-10,10]内'
        c5:
          type: integer
          description: '胃经 位于区间[-10,10]内'
        c6:
          type: integer
          description: '胆经 位于区间[-10,10]内'
        c7:
          type: integer
          description: '膀胱经 位于区间[-10,10]内'
        app_heart_rate:
          type: integer
          description: App测的心率
        remark:
          type: string
          description: 备注
        created_at:
          type: string
          description: '测量时间 utc 时区 2018-07-04T08:01:27Z 格式'
          format: date-time
        heart_rate:
          type: integer
          description: 算法服务器测的心率
        finger:
          $ref: '#/components/schemas/Finger' 
        record_type:
          $ref: '#/components/schemas/RecordType'
        tags:
          type: array
          description: 分析报告的选项标签
          items:
            $ref: '#/components/schemas/AnalysisReportGeneralExplainItem'
        has_paid:
          type: boolean
          description: 是否完成支付
        show_full_report:
          type: boolean
          description: 是否显示完整报告
    Analysis:
      type: object
      properties:
        cid:
          type: integer
          description: 测量流水号
        analysis_session:
          type: string
          description: 智能分析会话信息（如果有问询需要在后续请求中填写该字段）
        answers:
          type: array
          items:
            $ref: '#/components/schemas/Answer'
    Answer:
      type: object
      properties:
        question_key:
          type: string
          description: 问题唯一标识
        values:
          type: array
          description: 答案
          items:
            type: string
            description: 答案的值
    AnalysisResult:
      type: object
      properties:
        cid:
          type: integer
          description: 上下文ID
        transaction_no:
          type: string
          description: 测量流水号
        analysis_session:
          type: string
          description: 智能分析会话信息
        analysis_done:
          type: boolean
          description: 智能分析是否结束，true 表示分析结束，false 表示需要回答问题
        questionnaire:
          $ref: '#/components/schemas/Questionnaire'
        analysis_report:
          $ref: '#/components/schemas/AnalysisReport'
        analysis_report_result_error:
          type: string
          description: 智能分析结果是否存在异常
    AnalysisResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/AnalysisResult'
    Questionnaire:
      type: object
      description: 智能分析问卷
      properties:
        title:
          type: string
          description: 问卷的标题
        questions:
          type: array
          description: 问题列表
          items:
            $ref: '#/components/schemas/Question'
        answers:
          type: array
          description: 答案列表
          items:
            $ref: '#/components/schemas/Answer'
        created_at:
          type: string
          description: '问卷创建时间 2018-07-04T08:01:27Z 格式'
          format: date-time
    Question:
      type: object
      properties:
        key:
          type: string
          description: 问题的标识
        title:
          type: string
          description: 问题标题
        description:
          type: string
          description: 问题描述
        tip:
          type: string
          description: 问题的提示信息
        type:
          type: string
          description: 单选或多选 单选 single_choice 多选 multiple_choice
        choices:
          type: array
          description: 问题的选项
          items:
            $ref: '#/components/schemas/QuestionChoiceItem'
        default_keys:
          type: array
          description: 默认选中的 key 清单
          items:
            type: string
            description: 选项的 key
    QuestionChoiceItem:
      type: object
      description: 选择题问题的选项
      properties:
        key:
          type: string
          description: 选项的标识
        name:
          type: string
          description: 选项显示的名称
        value:
          type: string
          description: 选项的值
        conflict_keys:
          type: array
          description: 冲突的选项的 key 清单
          items:
            type: string
            description: 选项的 key
    AnalysisReport:
      type: object
      description: 分析报告
      required:
        - report_version
        - report_id
        - content
      properties:
        report_version:
          type: string
          description: 分析报告版本. 当前仅支持 `1.0` 这个值.
        report_id:
          type: string
          description: 分析报告 ID
        content:
          $ref: '#/components/schemas/AnalysisReportContent'
    AnalysisReportContent:
      type: object
      description: 分析报告的内容
      properties:
        user_profile:
          $ref: '#/components/schemas/AnalysisReportContentUserProfile'
        measurement_result:
          $ref: '#/components/schemas/AnalysisReportContentMeasurementResult'
        tags:
          $ref: '#/components/schemas/AnalysisReportContentTags'
        lead:
          $ref: '#/components/schemas/AnalysisReportContentLead'
        tips_for_woman:
          $ref: '#/components/schemas/AnalysisReportContentTipsForWoman'
        channels_and_collaterals_explains:
          $ref: '#/components/schemas/AnalysisReportCCExplains'
        constitution_differentiation_explains:
          $ref: '#/components/schemas/AnalysisReportCDExplains'
        syndrome_differentiation_explains:
          $ref: '#/components/schemas/AnalysisReportSDExplains'
        channels_and_collaterals_strength:
          $ref: '#/components/schemas/ChannelsAndCollateralsStrength'
        constitution_differentiation_explain_notices:
          $ref: '#/components/schemas/ConstitutionDifferentiationExplainNotices'
        channels_and_collaterals_explain_notices:
          $ref: '#/components/schemas/ChannelsAndCollateralsExplainNotices'
        measurement_tips:
          $ref: '#/components/schemas/MeasurementTips'
        dictionary_entries:
          $ref: '#/components/schemas/DictionaryEntries'
        factor_explains:
          $ref: '#/components/schemas/FactorExplains'
        baby_tips:
          $ref: '#/components/schemas/BabyTips'
        health_descriptions:
          $ref: '#/components/schemas/HealthDescriptions'
        uterine_health_indexes:
          $ref: '#/components/schemas/UterineHealthIndexes'
        uterus_attention_prompts:
          $ref: '#/components/schemas/UterusAttentionPrompts'
        uterine_health_descriptions:
          $ref: '#/components/schemas/UterineHealthDescriptions'
        menstrual_health_values:
          $ref: '#/components/schemas/MenstrualHealthValues'
        menstrual_health_descriptions:
          $ref: '#/components/schemas/MenstrualHealthDescriptions'
        gynecological_inflammations:
          $ref: '#/components/schemas/GynecologicalInflammations'
        gynecological_inflammation_descriptions:
          $ref: '#/components/schemas/GynecologicalInflammationDescriptions'
        breast_health:
          $ref: '#/components/schemas/BreastHealth'
        breast_health_descriptions:
          $ref: '#/components/schemas/BreastHealthDescriptions'
        emotional_health_indexes:
          $ref: '#/components/schemas/EmotionalHealthIndexes'
        emotional_health_descriptions:
          $ref: '#/components/schemas/EmotionalHealthDescriptions'
        facial_skins:
          $ref: '#/components/schemas/FacialSkins'
        facial_skin_descriptions:
          $ref: '#/components/schemas/FacialSkinDescriptions'
        reproductive_age_considerations:
          $ref: '#/components/schemas/ReproductiveAgeConsiderations'
        hormone_levels:
          $ref: '#/components/schemas/HormoneLevels'
        breast_cancer_ovarian_cancers:
          $ref: '#/components/schemas/BreastCancerOvarianCancers'
        breast_cancer_ovarian_cancer_descriptions:
          $ref: '#/components/schemas/BreastCancerOvarianCancerDescriptions'
        lymphatic_health:
          $ref: '#/components/schemas/LymphaticHealth'
        lymphatic_health_descriptions:
          $ref: '#/components/schemas/LymphaticHealthDescriptions'
        m0:
          type: integer
          description: 月经健康指数
          x-nullable: true
        m1:
          type: integer
          description: 月经不调指数
          x-nullable: true
        m2:
          type: integer
          description: 痛经指数
          x-nullable: true
        m3:
          type: integer
          description: 乳腺健康问答计分
          x-nullable: true
        f100:
          type: integer
          description: 子宫健康指数
        f101:
          type: integer
          description: 妇科疾病风险指数
        f102:
          type: integer
          description: 妇科炎症指数
        f103:
          type: integer
          description: 情绪健康指数
        f104:
          type: integer
          description: 面部美肤指数
        f105:
          type: integer
          description: 生殖年龄指数
        f106:
          type: integer
          description: 激素水平指数
        f107:
          type: integer
          description: 淋巴健康指数
        created_at:
          type: string
          description: '测量时间 utc 时区 2018-07-04T08:01:27Z 格式'
          format: date-time
    AnalysisReportContentUserProfile:
      type: object
      description: 分析报告的 UserProfile
      properties:
        user_id:
          type: integer
          description: 用户ID
        nickname:
          type: string
          description: 客户昵称
        birthday:
          type: string
          description: 生日 UTC 格式 （可选）
          format: date-time
        age:
          type: integer
          description: 年龄
          minimum: 0
        gender:
          $ref: '#/components/schemas/Gender'  
        height:
          type: integer
          description: 身高（必填）单位厘米
          minimum: 0
        weight:
          type: integer
          description: 体重（必填）单位厘米
          minimum: 0
        avatar_url:
          type: string
          description: 头像
    AnalysisReportContentMeasurementResult:
      type: object
      description: 分析报告中的测量结果信息
      properties:
        finger:
          $ref: '#/components/schemas/Finger' 
        c0:
          type: integer
          description: '心包经 位于区间[-10,10]内'
        c1:
          type: integer
          description: '肝经 位于区间[-10,10]内'
        c2:
          type: integer
          description: '肾经 位于区间[-10,10]内'
        c3:
          type: integer
          description: '脾经 位于区间[-10,10]内'
        c4:
          type: integer
          description: '肺经 位于区间[-10,10]内'
        c5:
          type: integer
          description: '胃经 位于区间[-10,10]内'
        c6:
          type: integer
          description: '胆经 位于区间[-10,10]内'
        c7:
          type: integer
          description: '膀胱经 位于区间[-10,10]内'
        heart_rate:
          type: integer
          description: 服务器返回的心率
        app_heart_rate:
          type: integer
          description: App 测量的心率
        partial_pulse_wave:
          type: array
          items:
            type: integer
          description: 截取的波形数据
        app_highest_heart_rate:
          type: integer
          description: app最大的心率
        app_lowest_heart_rate:
          type: integer
          description: app最小的心率
    GetAnalysisResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/AnalysisReport'
    GetH5Response:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              type: object
              properties:
                static_h5_path:
                  type: string
                  description: h5静态页面地址
    RecordTokenResponse:
      allOf:
        - $ref: '#/components/schemas/BasicResponse'
        - type: object
          required:
            - data
          properties:
            data:
              $ref: '#/components/schemas/RecordToken'
    RecordToken:
      type: object
      properties:
        token:
          type: string
          description: 分享记录的token
